<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Offers | Умный подбор бонусов</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap');
        
        :root {
            --primary: #8B5CF6;
            --primary-dark: #7C3AED;
            --primary-light: #A78BFA;
            --secondary: #06B6D4;
            --accent: #F59E0B;
            --dark: #0F172A;
            --light: #F8FAFC;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Inter', 'Manrope', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #0F172A;
            min-height: 100vh;
            color: #F1F5F9;
            overflow-x: hidden;
            position: relative;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* AI Фон с эффектами */
        .ai-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            overflow: hidden;
        }
        
        .ai-background::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 15% 15%, rgba(139, 92, 246, 0.15) 0%, transparent 25%),
                radial-gradient(circle at 85% 85%, rgba(6, 182, 212, 0.15) 0%, transparent 25%),
                radial-gradient(circle at 50% 50%, rgba(99, 102, 241, 0.1) 0%, transparent 40%);
            filter: blur(40px);
        }
        
        .ai-particle {
            position: absolute;
            background: linear-gradient(45deg, #8B5CF6, #06B6D4);
            border-radius: 50%;
            opacity: 0.1;
            animation: float 20s infinite linear;
        }
        
        .ai-circuit {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(90deg, transparent 95%, rgba(139, 92, 246, 0.05) 100%),
                linear-gradient(0deg, transparent 95%, rgba(6, 182, 212, 0.05) 100%);
            background-size: 50px 50px;
            opacity: 0.3;
            mask-image: radial-gradient(circle at center, black 20%, transparent 70%);
        }
        
        .ai-glow {
            position: absolute;
            width: 500px;
            height: 500px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(139, 92, 246, 0.1) 0%, transparent 70%);
            filter: blur(60px);
            animation: pulse 8s infinite alternate;
        }
        
        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(100px, 100px) rotate(360deg); }
        }
        
        @keyframes pulse {
            0% { opacity: 0.3; transform: scale(1); }
            100% { opacity: 0.6; transform: scale(1.1); }
        }
        
        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }
        
        .glass-card {
            background: rgba(30, 41, 59, 0.75);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .glass-card-hover:hover {
            background: rgba(30, 41, 59, 0.9);
            border-color: rgba(139, 92, 246, 0.3);
            transform: translateY(-4px);
            box-shadow: 
                0 12px 40px rgba(0, 0, 0, 0.4),
                0 0 0 1px rgba(139, 92, 246, 0.1);
        }
        
        .glass-card-hover:active {
            transform: translateY(-2px);
            transition: transform 0.1s;
        }
        
        .step-card {
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.1);
            position: relative;
            overflow: hidden;
        }
        
        .step-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.6s;
        }
        
        .step-card:hover::before {
            left: 100%;
        }
        
        .step-card.selected {
            border-color: var(--primary);
            background: rgba(30, 41, 59, 0.9);
            box-shadow: 
                0 12px 40px rgba(139, 92, 246, 0.25),
                inset 0 0 0 1px rgba(139, 92, 246, 0.2),
                0 0 20px rgba(139, 92, 246, 0.1);
        }
        
        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #334155;
            transition: all 0.3s ease;
            position: relative;
            flex-shrink: 0;
        }
        
        .progress-dot.active {
            background: var(--primary);
            box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.3),
                        0 0 15px rgba(139, 92, 246, 0.5);
            animation: pulseDot 2s infinite;
        }
        
        @keyframes pulseDot {
            0%, 100% { box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.3), 0 0 15px rgba(139, 92, 246, 0.5); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.3), 0 0 20px rgba(139, 92, 246, 0.8); }
        }
        
        .progress-line {
            height: 2px;
            background: #334155;
            flex-grow: 1;
            position: relative;
            overflow: hidden;
            margin: 0 8px;
        }
        
        .progress-line.active {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            box-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
        }
        
        .progress-line.active::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmerLine 2s infinite;
        }
        
        @keyframes shimmerLine {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .checkbox-custom {
            width: 24px;
            height: 24px;
            border-radius: 6px;
            border: 2px solid #475569;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(30, 41, 59, 0.5);
            flex-shrink: 0;
        }
        
        .checkbox-custom.selected {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-color: transparent;
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.5);
            transform: scale(1.05);
        }
        
        .floating-cta {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 50;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 -8px 32px rgba(0, 0, 0, 0.5);
            padding: 16px 24px;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .floating-cta.hidden {
            transform: translateY(100%);
        }
        
        .slide-in {
            animation: slideIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        .fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #8B5CF6 0%, #06B6D4 50%, #10B981 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            background-size: 200% auto;
            animation: gradientShift 3s ease infinite;
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .ai-shimmer {
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 255, 255, 0.1) 50%, 
                transparent 100%);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }
        
        .icon-wrapper {
            width: 56px;
            height: 56px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .icon-wrapper::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: inherit;
            filter: blur(10px);
            opacity: 0.5;
            z-index: -1;
        }
        
        .deposit-icon {
            background: linear-gradient(135deg, #10B981, #34D399);
        }
        
        .freespins-icon {
            background: linear-gradient(135deg, #F59E0B, #FBBF24);
        }
        
        .fastwithdrawal-icon {
            background: linear-gradient(135deg, #3B82F6, #60A5FA);
        }
        
        .bonus-badge-rect {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }
        
        .bonus-badge-rect::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s;
        }
        
        .bonus-badge-rect:hover::before {
            left: 100%;
        }
        
        .bonus-badge-under100 {
            background: rgba(107, 114, 128, 0.25);
            color: #D1D5DB;
            border-color: #6B7280;
        }
        
        .bonus-badge-under100.selected {
            background: linear-gradient(135deg, rgba(107, 114, 128, 0.4), rgba(156, 163, 175, 0.6));
            color: white;
            border-color: #9CA3AF;
            box-shadow: 0 0 20px rgba(156, 163, 175, 0.4);
        }
        
        .bonus-badge-100-200 {
            background: rgba(245, 158, 11, 0.25);
            color: #FDE68A;
            border-color: #F59E0B;
        }
        
        .bonus-badge-100-200.selected {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.4), rgba(251, 191, 36, 0.6));
            color: white;
            border-color: #FBBF24;
            box-shadow: 0 0 20px rgba(251, 191, 36, 0.4);
        }
        
        .bonus-badge-over200 {
            background: rgba(139, 92, 246, 0.25);
            color: #C4B5FD;
            border-color: #8B5CF6;
        }
        
        .bonus-badge-over200.selected {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.4), rgba(167, 139, 250, 0.6));
            color: white;
            border-color: #A78BFA;
            box-shadow: 0 0 20px rgba(167, 139, 250, 0.4);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            transition: all 0.3s ease;
            border: none;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }
        
        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s;
        }
        
        .btn-primary:hover::before {
            left: 100%;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.4);
        }
        
        .btn-primary:active {
            transform: translateY(0);
            transition: transform 0.1s;
        }
        
        .ai-pulse {
            animation: aiPulse 2s infinite;
        }
        
        @keyframes aiPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .ai-glow-text {
            text-shadow: 0 0 20px rgba(139, 92, 246, 0.5);
        }
        
        .ai-typing {
            border-right: 2px solid;
            animation: typing 1s infinite;
        }
        
        @keyframes typing {
            0%, 100% { border-color: transparent; }
            50% { border-color: var(--primary); }
        }
        
        /* Стили для экрана сканирования одной строкой */
        .scanning-container {
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .scanning-line {
            width: 100%;
            max-width: 800px;
            margin: 40px 0;
        }
        
        .scanning-progress {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 30px;
            position: relative;
        }
        
        .progress-fill {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #8B5CF6, #06B6D4, #10B981);
            border-radius: 4px;
            transition: width 0.3s ease;
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.5);
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: progressShimmer 1.5s infinite;
        }
        
        @keyframes progressShimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .scanning-text {
            font-size: 22px;
            font-weight: 600;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            margin-bottom: 20px;
        }
        
        .status-text {
            display: inline-block;
            background: linear-gradient(90deg, #8B5CF6, #06B6D4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            background-size: 200% auto;
            animation: statusGradient 2s infinite;
            text-align: center;
            padding: 0 10px;
        }
        
        @keyframes statusGradient {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .status-details {
            font-size: 16px;
            color: #94A3B8;
            margin-top: 10px;
            min-height: 24px;
            transition: opacity 0.3s ease;
        }
        
        .scanning-stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(90deg, #8B5CF6, #06B6D4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .stat-label {
            font-size: 14px;
            color: #94A3B8;
            margin-top: 5px;
        }
        
        .scanning-complete {
            text-align: center;
            margin-top: 40px;
            animation: fadeIn 0.5s ease;
        }
        
        .complete-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #10B981, #34D399);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            animation: scaleIn 0.5s ease;
        }
        
        @keyframes scaleIn {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        /* Оптимизация для мобильных */
        @media (max-width: 768px) {
            .ai-background::before {
                filter: blur(20px);
            }
            
            .ai-glow {
                width: 300px;
                height: 300px;
            }
            
            .glass-card {
                backdrop-filter: blur(8px);
            }
            
            .floating-cta {
                padding: 12px 16px;
                backdrop-filter: blur(10px);
            }
            
            .progress-dot {
                width: 10px;
                height: 10px;
            }
            
            .icon-wrapper {
                width: 48px;
                height: 48px;
                border-radius: 12px;
                margin-bottom: 16px;
            }
            
            .bonus-badge-rect {
                padding: 10px 20px;
                font-size: 1.25rem;
                margin-bottom: 1rem;
            }
            
            .checkbox-custom {
                width: 20px;
                height: 20px;
            }
            
            .scanning-text {
                font-size: 18px;
                min-height: 50px;
            }
            
            .status-details {
                font-size: 14px;
            }
            
            .stat-value {
                font-size: 22px;
            }
            
            .stat-label {
                font-size: 12px;
            }
            
            .scanning-stats {
                gap: 20px;
            }
        }
        
        /* Улучшение тач-интерфейса */
        button, .clickable {
            touch-action: manipulation;
            user-select: none;
            -webkit-user-select: none;
            cursor: pointer;
        }
        
        /* Кастомный скроллбар */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(30, 41, 59, 0.5);
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--primary), var(--secondary));
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, var(--primary-dark), var(--secondary));
        }
    </style>
</head>
<body class="antialiased">
    <!-- AI Фон с эффектами -->
    <div class="ai-background">
        <div class="ai-circuit"></div>
        <div class="ai-glow" style="top: 10%; left: 10%;"></div>
        <div class="ai-glow" style="bottom: 10%; right: 10%;"></div>
        <div class="ai-particle" style="width: 100px; height: 100px; top: 20%; left: 20%; animation-delay: 0s;"></div>
        <div class="ai-particle" style="width: 150px; height: 150px; top: 60%; right: 15%; animation-delay: -5s;"></div>
        <div class="ai-particle" style="width: 80px; height: 80px; bottom: 30%; left: 40%; animation-delay: -10s;"></div>
    </div>
    
    <!-- Главный контейнер -->
    <div class="min-h-screen pb-32">
        <!-- Шапка -->
        <header class="pt-6 pb-4 px-6">
            <div class="max-w-6xl mx-auto">
                <div class="flex flex-col md:flex-row justify-between items-center mb-8">
                    <div class="mb-4 md:mb-0">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 rounded-2xl bg-gradient-to-br from-purple-500 to-cyan-500 flex items-center justify-center shadow-lg relative overflow-hidden">
                                <i class="fas fa-robot text-white text-xl"></i>
                                <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent ai-shimmer"></div>
                            </div>
                            <div>
                                <h1 class="text-3xl font-extrabold tracking-tight">AI<span class="gradient-text">Offers</span></h1>
                                <p class="text-gray-400 text-base font-medium flex items-center">
                                    <span class="ai-typing mr-2">Умный подбор бонусов</span>
                                    <i class="fas fa-bolt text-yellow-400 text-sm"></i>
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-4">
                        <div class="stat-card glass-card rounded-xl p-4">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500/20 to-cyan-500/20 flex items-center justify-center relative overflow-hidden">
                                    <i class="fas fa-database text-cyan-400 text-base"></i>
                                    <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent ai-shimmer"></div>
                                </div>
                                <div>
                                    <div class="text-2xl font-bold text-white ai-glow-text">1,247</div>
                                    <div class="text-sm text-gray-400">офферов в базе</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Прогресс-бар -->
        <div class="max-w-6xl mx-auto px-6 mb-10">
            <div class="glass-card rounded-2xl p-6 relative overflow-hidden">
                <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-purple-500 via-cyan-500 to-transparent"></div>
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h2 class="text-xl font-bold text-white mb-2">AI-подбор за 3 шага</h2>
                        <p class="text-gray-400 text-sm">Нейросеть подберёт лучшие бонусы под ваш запрос</p>
                    </div>
                    <div>
                        <div class="ai-badge px-4 py-2 rounded-full bg-gradient-to-r from-purple-500/20 to-cyan-500/20 text-purple-300 text-sm font-semibold border border-white/10">
                            <i class="fas fa-brain mr-2"></i>
                            <span>AI-Powered Selection</span>
                        </div>
                    </div>
                </div>
                
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center">
                        <div class="progress-dot active" id="step1-dot"></div>
                        <span class="ml-3 text-sm font-medium text-white">Тип</span>
                    </div>
                    
                    <div class="progress-line" id="line1-2"></div>
                    
                    <div class="flex items-center">
                        <div class="progress-dot" id="step2-dot"></div>
                        <span class="ml-3 text-sm font-medium text-gray-400">Приоритеты</span>
                    </div>
                    
                    <div class="progress-line" id="line2-3"></div>
                    
                    <div class="flex items-center">
                        <div class="progress-dot" id="step3-dot"></div>
                        <span class="ml-3 text-sm font-medium text-gray-400">Бонус</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Контейнер шагов -->
        <div class="max-w-6xl mx-auto px-6">
            <!-- Шаг 1: Тип оффера -->
            <div id="step1" class="step-container slide-in">
                <div class="mb-10">
                    <h2 class="text-2xl font-bold text-center text-white mb-3">Какой тип оффера вам интересен?</h2>
                    <p class="text-gray-400 text-center text-base max-w-2xl mx-auto">AI проанализирует все варианты и подберёт оптимальный</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
                    <div class="step-card glass-card glass-card-hover rounded-2xl p-6 cursor-pointer border-2 border-transparent clickable" data-value="deposit">
                        <div class="icon-wrapper deposit-icon">
                            <i class="fas fa-piggy-bank text-white text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-3">Депозитный бонус</h3>
                        <p class="text-gray-400 text-base mb-6">Дополнительные средства при пополнении счета</p>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center text-emerald-400 font-semibold text-base">
                                <i class="fas fa-check-circle mr-2 text-sm"></i>
                                <span>8 AI-подборов</span>
                            </div>
                            <div class="w-8 h-8 rounded-full border-2 border-gray-600 flex items-center justify-center">
                                <i class="fas fa-arrow-right text-gray-400 text-sm"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step-card glass-card glass-card-hover rounded-2xl p-6 cursor-pointer border-2 border-transparent clickable" data-value="freespins">
                        <div class="icon-wrapper freespins-icon">
                            <i class="fas fa-dice text-white text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-3">Фриспины</h3>
                        <p class="text-gray-400 text-base mb-6">Бесплатные вращения на популярных слотах</p>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center text-emerald-400 font-semibold text-base">
                                <i class="fas fa-check-circle mr-2 text-sm"></i>
                                <span>5 AI-подборов</span>
                            </div>
                            <div class="w-8 h-8 rounded-full border-2 border-gray-600 flex items-center justify-center">
                                <i class="fas fa-arrow-right text-gray-400 text-sm"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step-card glass-card glass-card-hover rounded-2xl p-6 cursor-pointer border-2 border-transparent clickable" data-value="fastwithdrawal">
                        <div class="icon-wrapper fastwithdrawal-icon">
                            <i class="fas fa-bolt text-white text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-3">Быстрый вывод</h3>
                        <p class="text-gray-400 text-base mb-6">Вывод выигрышей за 5-15 минут</p>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center text-emerald-400 font-semibold text-base">
                                <i class="fas fa-check-circle mr-2 text-sm"></i>
                                <span>4 AI-подбора</span>
                            </div>
                            <div class="w-8 h-8 rounded-full border-2 border-gray-600 flex items-center justify-center">
                                <i class="fas fa-arrow-right text-gray-400 text-sm"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Шаг 2: Приоритеты -->
            <div id="step2" class="step-container hidden">
                <div class="mb-10">
                    <h2 class="text-2xl font-bold text-center text-white mb-3">Что для вас наиболее важно?</h2>
                    <p class="text-gray-400 text-center text-base max-w-2xl mx-auto">Выберите 1-2 ключевых приоритета для AI-анализа</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-12">
                    <div class="priority-option glass-card glass-card-hover rounded-xl p-5 cursor-pointer border-2 border-transparent clickable" data-value="speed">
                        <div class="flex items-start">
                            <div class="checkbox-custom mr-4 mt-0.5">
                                <i class="fas fa-check text-white text-sm opacity-0"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-white mb-2">Скорость вывода</h3>
                                <p class="text-gray-400 text-sm">Быстрые выплаты, обработка до 15 минут</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="priority-option glass-card glass-card-hover rounded-xl p-5 cursor-pointer border-2 border-transparent clickable" data-value="maxbonus">
                        <div class="flex items-start">
                            <div class="checkbox-custom mr-4 mt-0.5">
                                <i class="fas fa-check text-white text-sm opacity-0"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-white mb-2">Максимум бонуса</h3>
                                <p class="text-gray-400 text-sm">Наибольший размер бонуса и подарки</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="priority-option glass-card glass-card-hover rounded-xl p-5 cursor-pointer border-2 border-transparent clickable" data-value="mindocs">
                        <div class="flex items-start">
                            <div class="checkbox-custom mr-4 mt-0.5">
                                <i class="fas fa-check text-white text-sm opacity-0"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-white mb-2">Минимум документов</h3>
                                <p class="text-gray-400 text-sm">Упрощенная верификация</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="priority-option glass-card glass-card-hover rounded-xl p-5 cursor-pointer border-2 border-transparent clickable" data-value="verified">
                        <div class="flex items-start">
                            <div class="checkbox-custom mr-4 mt-0.5">
                                <i class="fas fa-check text-white text-sm opacity-0"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-white mb-2">Только проверенные</h3>
                                <p class="text-gray-400 text-sm">Офферы с высокой репутацией</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="text-center text-gray-400 text-sm mb-8">
                    <i class="fas fa-robot mr-2"></i>
                    <span>Выбрано: <span id="selected-priorities-count">0</span> из 2 приоритетов</span>
                </div>
            </div>
            
            <!-- Шаг 3: Размер бонуса -->
            <div id="step3" class="step-container hidden">
                <div class="mb-10">
                    <h2 class="text-2xl font-bold text-center text-white mb-3">Какой размер бонуса вы ищете?</h2>
                    <p class="text-gray-400 text-center text-base max-w-2xl mx-auto">AI рассчитает оптимальные условия для каждого варианта</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
                    <!-- Карточка: До 100% -->
                    <div class="bonus-size-card glass-card glass-card-hover rounded-2xl p-6 cursor-pointer border-2 border-transparent clickable" data-value="under100">
                        <div class="text-center mb-6">
                            <div class="bonus-badge-rect bonus-badge-under100">
                                <span class="text-xl">До 100%</span>
                            </div>
                            <h3 class="text-lg font-bold text-white mb-3">Стандартный</h3>
                            <p class="text-gray-400 text-sm mb-4">Минимальные требования, для новичков</p>
                            
                            <div class="text-left bg-gray-900/30 p-4 rounded-xl mb-4">
                                <div class="font-medium text-gray-300 text-sm mb-2 flex justify-between items-center">
                                    <span>Требования:</span>
                                    <span class="px-2 py-1 bg-green-900/30 text-green-400 text-xs rounded">AI Low Risk</span>
                                </div>
                                
                                <div class="space-y-2">
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-rotate text-emerald-400 mr-2 text-xs"></i>
                                        <span>Вейджер: <strong class="text-white">x10-20</strong></span>
                                    </div>
                                    
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-wallet text-emerald-400 mr-2 text-xs"></i>
                                        <span>Депозит: <strong class="text-white">от 500₽</strong></span>
                                    </div>
                                    
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-clock text-emerald-400 mr-2 text-xs"></i>
                                        <span>Вывод: <strong class="text-white">1-3 часа</strong></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-center">
                            <div class="inline-flex items-center px-4 py-2 bg-gray-800/50 rounded-full text-gray-300 text-sm font-medium">
                                <i class="fas fa-chart-line mr-2 text-xs"></i>
                                <span>9 AI-вариантов</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Карточка: 100–200% -->
                    <div class="bonus-size-card glass-card glass-card-hover rounded-2xl p-6 cursor-pointer border-2 border-transparent clickable" data-value="100-200">
                        <div class="text-center mb-6">
                            <div class="bonus-badge-rect bonus-badge-100-200">
                                <span class="text-xl">100-200%</span>
                            </div>
                            <h3 class="text-lg font-bold text-white mb-3">Повышенный</h3>
                            <p class="text-gray-400 text-sm mb-4">Средние требования, для опытных</p>
                            
                            <div class="text-left bg-amber-900/20 p-4 rounded-xl mb-4">
                                <div class="font-medium text-amber-300 text-sm mb-2 flex justify-between items-center">
                                    <span>Требования:</span>
                                    <span class="px-2 py-1 bg-amber-900/30 text-amber-400 text-xs rounded">AI Medium Risk</span>
                                </div>
                                
                                <div class="space-y-2">
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-rotate text-amber-400 mr-2 text-xs"></i>
                                        <span>Вейджер: <strong class="text-white">x20-35</strong></span>
                                    </div>
                                    
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-wallet text-amber-400 mr-2 text-xs"></i>
                                        <span>Депозит: <strong class="text-white">от 1 000₽</strong></span>
                                    </div>
                                    
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-clock text-amber-400 mr-2 text-xs"></i>
                                        <span>Вывод: <strong class="text-white">3-8 часов</strong></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-center">
                            <div class="inline-flex items-center px-4 py-2 bg-amber-900/30 rounded-full text-amber-300 text-sm font-medium">
                                <i class="fas fa-fire mr-2 text-xs"></i>
                                <span>5 AI-вариантов</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Карточка: 200%+ -->
                    <div class="bonus-size-card glass-card glass-card-hover rounded-2xl p-6 cursor-pointer border-2 border-transparent clickable" data-value="over200">
                        <div class="text-center mb-6">
                            <div class="bonus-badge-rect bonus-badge-over200">
                                <span class="text-xl">200%+</span>
                            </div>
                            <h3 class="text-lg font-bold text-white mb-3">Максимальный</h3>
                            <p class="text-gray-400 text-sm mb-4">Высокие требования, для профессионалов</p>
                            
                            <div class="text-left bg-purple-900/20 p-4 rounded-xl mb-4">
                                <div class="font-medium text-purple-300 text-sm mb-2 flex justify-between items-center">
                                    <span>Требования:</span>
                                    <span class="px-2 py-1 bg-purple-900/30 text-purple-400 text-xs rounded">AI High Risk</span>
                                </div>
                                
                                <div class="space-y-2">
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-rotate text-purple-400 mr-2 text-xs"></i>
                                        <span>Вейджер: <strong class="text-white">x35-50</strong></span>
                                    </div>
                                    
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-wallet text-purple-400 mr-2 text-xs"></i>
                                        <span>Депозит: <strong class="text-white">от 2 000₽</strong></span>
                                    </div>
                                    
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-clock text-purple-400 mr-2 text-xs"></i>
                                        <span>Вывод: <strong class="text-white">12-24 часа</strong></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-center">
                            <div class="inline-flex items-center px-4 py-2 bg-purple-900/30 rounded-full text-purple-300 text-sm font-medium">
                                <i class="fas fa-crown mr-2 text-xs"></i>
                                <span>3 AI-варианта</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Экран сканирования одной строкой -->
            <div id="scanning-screen" class="hidden">
                <div class="scanning-container">
                    <h2 class="text-3xl font-bold text-white mb-6 gradient-text">AI сканирует базу офферов</h2>
                    
                    <div class="scanning-line">
                        <div class="scanning-text">
                            <span id="current-status" class="status-text">Сканируем базу казино...</span>
                        </div>
                        <div id="status-details" class="status-details">Проверяем 1,247 офферов в реальном времени</div>
                        
                        <div class="scanning-progress">
                            <div id="progress-fill" class="progress-fill"></div>
                        </div>
                    </div>
                    
                    <div class="scanning-stats">
                        <div class="stat-item">
                            <div id="scanned-count" class="stat-value">0</div>
                            <div class="stat-label">Проверено офферов</div>
                        </div>
                        <div class="stat-item">
                            <div id="filtered-count" class="stat-value">0</div>
                            <div class="stat-label">Подходят под фильтры</div>
                        </div>
                        <div class="stat-item">
                            <div id="ai-score" class="stat-value">0%</div>
                            <div class="stat-label">AI оценка совпадения</div>
                        </div>
                    </div>
                    
                    <div id="scanning-complete" class="scanning-complete hidden">
                        <div class="complete-icon">
                            <i class="fas fa-check text-white text-2xl"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-white mb-2">Сканирование завершено!</h3>
                        <p class="text-gray-400">AI нашёл оптимальные офферы под ваши критерии</p>
                    </div>
                </div>
            </div>
            
            <!-- Результаты -->
            <div id="results" class="hidden">
                <!-- Кнопка вернуться к редактированию -->
                <div class="mb-8">
                    <button id="back-to-edit-btn" class="glass-card glass-card-hover px-6 py-4 rounded-xl border border-white/10 text-white font-semibold w-full md:w-auto flex items-center justify-center clickable">
                        <i class="fas fa-edit mr-3 text-gray-400"></i>
                        <span class="text-base">Изменить параметры AI-подбора</span>
                    </button>
                </div>
                
                <div class="mb-10">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4">
                        <div>
                            <div class="flex items-center mb-3">
                                <div class="ai-badge px-3 py-1.5 rounded-full bg-gradient-to-r from-purple-500/20 to-cyan-500/20 text-purple-300 text-sm font-semibold mr-4">
                                    <i class="fas fa-brain mr-1"></i>
                                    <span>AI РЕКОМЕНДАЦИИ</span>
                                </div>
                                <div class="text-gray-400 text-sm">Обновлено сейчас</div>
                            </div>
                            <h2 class="text-3xl font-bold text-white mb-3 ai-glow-text">Персонализированная AI-подборка</h2>
                            <p class="text-gray-400 text-lg">ИИ проанализировал 1,247 офферов и выбрал лучшие</p>
                        </div>
                        <div class="flex items-center bg-gradient-to-r from-purple-900/30 to-cyan-900/30 rounded-xl px-5 py-4 border border-white/10 w-full md:w-auto ai-pulse">
                            <div class="w-3 h-3 rounded-full bg-emerald-400 animate-pulse mr-3"></div>
                            <span class="font-bold text-white text-xl" id="matched-offers-count">7 офферов</span>
                            <span class="text-gray-400 text-sm ml-2">AI рекомендует</span>
                        </div>
                    </div>
                    
                    <div class="flex flex-wrap gap-3 mb-10">
                        <span class="px-4 py-2.5 bg-white/5 border border-white/10 rounded-full text-sm font-medium text-white flex items-center">
                            <i class="fas fa-filter mr-2.5 text-purple-400 text-xs"></i>
                            <span id="selected-type-text">Депозит</span>
                        </span>
                        <span class="px-4 py-2.5 bg-white/5 border border-white/10 rounded-full text-sm font-medium text-white flex items-center">
                            <i class="fas fa-star mr-2.5 text-amber-400 text-xs"></i>
                            <span id="selected-priorities-text">2 приоритета</span>
                        </span>
                        <span class="px-4 py-2.5 bg-white/5 border border-white/10 rounded-full text-sm font-medium text-white flex items-center">
                            <i class="fas fa-percentage mr-2.5 text-cyan-400 text-xs"></i>
                            <span id="selected-bonus-text">100-200%</span>
                        </span>
                    </div>
                </div>
                
                <!-- Карточки офферов -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12" id="offers-container">
                    <!-- Карточки будут сгенерированы здесь -->
                </div>
                
                <!-- Поделиться результатами -->
                <div class="glass-card rounded-2xl p-8 mb-10">
                    <div class="flex flex-col md:flex-row justify-between items-center">
                        <div class="mb-4 md:mb-0 md:mr-8">
                            <div class="flex items-center mb-3">
                                <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500 to-purple-500 flex items-center justify-center mr-4 relative overflow-hidden">
                                    <i class="fas fa-share-alt text-white text-xl"></i>
                                    <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent ai-shimmer"></div>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-white mb-2">Поделиться AI-результатами</h3>
                                    <p class="text-gray-400 text-sm">Отправьте другу ссылку на подборку</p>
                                </div>
                            </div>
                        </div>
                        <button id="share-results" class="btn-primary px-8 py-4 rounded-xl text-white font-bold w-full md:w-auto flex items-center justify-center clickable ai-pulse">
                            <i class="fas fa-copy mr-3 text-sm"></i>
                            <span class="text-base">Копировать AI-ссылку</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Плавающий CTA -->
    <div id="floating-cta" class="floating-cta">
        <div class="max-w-6xl mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-3 md:mb-0">
                    <button id="back-btn" class="hidden px-6 py-3 rounded-xl border border-white/10 text-gray-300 font-semibold w-full md:w-auto flex items-center justify-center clickable glass-card-hover">
                        <i class="fas fa-arrow-left mr-2 text-sm"></i>
                        <span class="text-base">Назад</span>
                    </button>
                </div>
                
                <div class="w-full md:w-auto">
                    <button id="next-btn" class="btn-primary px-10 py-4 rounded-xl text-white font-bold w-full flex items-center justify-center clickable">
                        <span id="next-btn-text" class="text-base">Продолжить</span>
                        <i class="fas fa-arrow-right ml-3 text-sm"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Состояние приложения
        const state = {
            currentStep: 1,
            offerType: null,
            priorities: [],
            bonusSize: null,
            isInitialized: false
        };
        
        // РЕАЛЬНЫЕ ДАННЫЕ ОФФЕРОВ с проанализированных сайтов
        const offersData = [
            {
                id: 1,
                name: "Beef Casino",
                bonus: "200% + 100 фриспинов",
                type: "deposit",
                rating: 4.8,
                popularity: "AI Топ-1",
                tag: "Эксклюзив",
                match: 98,
                color: "from-red-500 to-orange-500",
                icon: "fire",
                minDeposit: "100₽",
                withdrawalTime: "5-15 мин",
                risk: "Низкий",
                aiScore: 9.7,
                verification: "Есть",
                partnerLink: "https://bttrc.ru/go/spbjptxpva"
            },
            {
                id: 2,
                name: "MelBet",
                bonus: "130% + 30 фриспинов",
                type: "deposit",
                rating: 4.9,
                popularity: "AI Выбор",
                tag: "Быстрый вывод",
                match: 96,
                color: "from-emerald-500 to-green-500",
                icon: "trophy",
                minDeposit: "100₽",
                withdrawalTime: "10-20 мин",
                risk: "Низкий",
                aiScore: 9.5,
                verification: "Есть",
                partnerLink: "https://bttrc.ru/go/s3g8x82qqi"
            },
            {
                id: 3,
                name: "RT Casino",
                bonus: "150% к депозиту",
                type: "deposit",
                rating: 4.6,
                popularity: "AI Рекомендует",
                tag: "Без вейджера",
                match: 92,
                color: "from-blue-500 to-cyan-500",
                icon: "bolt",
                minDeposit: "500₽",
                withdrawalTime: "15-30 мин",
                risk: "Низкий",
                aiScore: 9.2,
                verification: "Есть",
                partnerLink: "https://bttrc.ru/go/slxlrrhbfk"
            },
            {
                id: 4,
                name: "Jet Casino",
                bonus: "100% + 50 фриспинов",
                type: "deposit",
                rating: 4.7,
                popularity: "AI Проверено",
                tag: "Скоростной",
                match: 90,
                color: "from-purple-500 to-pink-500",
                icon: "rocket",
                minDeposit: "200₽",
                withdrawalTime: "5-10 мин",
                risk: "Низкий",
                aiScore: 9.0,
                verification: "Есть",
                partnerLink: "https://bttrc.ru/go/s52s5n5qym"
            },
            {
                id: 5,
                name: "Flagman Casino",
                bonus: "250% + 70 фриспинов",
                type: "deposit",
                rating: 4.5,
                popularity: "AI Эксклюзив",
                tag: "Максимальный",
                match: 88,
                color: "from-amber-500 to-yellow-500",
                icon: "crown",
                minDeposit: "300₽",
                withdrawalTime: "10-25 мин",
                risk: "Средний",
                aiScore: 8.8,
                verification: "Есть",
                partnerLink: "https://bttrc.ru/go/s8po2l4f8z"
            },
            {
                id: 6,
                name: "Lev Casino",
                bonus: "120% к депозиту",
                type: "deposit",
                rating: 4.4,
                popularity: "AI Найдено",
                tag: "Льготный",
                match: 86,
                color: "from-indigo-500 to-blue-500",
                icon: "lion",
                minDeposit: "100₽",
                withdrawalTime: "15-40 мин",
                risk: "Низкий",
                aiScore: 8.6,
                verification: "Есть",
                partnerLink: "https://bttrc.ru/go/se0v5pfjcq"
            },
            {
                id: 7,
                name: "7K Casino",
                bonus: "100 фриспинов",
                type: "freespins",
                rating: 4.3,
                popularity: "AI Спецпредложение",
                tag: "Без депозита",
                match: 84,
                color: "from-rose-500 to-pink-500",
                icon: "dice",
                minDeposit: "0₽",
                withdrawalTime: "30-60 мин",
                risk: "Низкий",
                aiScore: 8.4,
                verification: "Есть",
                partnerLink: "https://bttrc.ru/go/sxy9ja32wo"
            }
        ];
        
        // Данные для сканирования
        const scanningSteps = [
            {
                status: "Сканируем базу казино...",
                details: "Проверяем 1,247 офферов в реальном времени",
                progress: 0
            },
            {
                status: "Ищем рабочие офферы...",
                details: "Проверяем актуальность и доступность бонусов",
                progress: 17
            },
            {
                status: "Смотрим договоренности...",
                details: "Анализируем наши партнерские соглашения",
                progress: 33
            },
            {
                status: "Фильтруем под ваш запрос...",
                details: "Применяем выбранные параметры подбора",
                progress: 50
            },
            {
                status: "Анализируем выгоду...",
                details: "Рассчитываем оптимальные условия для вас",
                progress: 67
            },
            {
                status: "Готовим финальную подборку...",
                details: "Формируем персонализированные рекомендации",
                progress: 83
            },
            {
                status: "Сканирование завершено!",
                details: "AI нашёл оптимальные офферы",
                progress: 100
            }
        ];
        
        // Инициализация при загрузке
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
        });
        
        // Инициализация приложения
        function initApp() {
            // Загрузка сохраненного состояния
            loadSavedState();
            
            // Инициализация шага 1
            initStep1();
            
            // Обновление счетчика офферов
            updateOffersCount();
            
            // Назначение обработчиков событий
            document.getElementById('next-btn').addEventListener('click', goToNextStep);
            document.getElementById('back-btn').addEventListener('click', goToPrevStep);
            document.getElementById('back-to-edit-btn').addEventListener('click', goBackToEdit);
            document.getElementById('share-results').addEventListener('click', shareResults);
            
            // Добавляем обработчики для всех кликабельных элементов
            document.querySelectorAll('.clickable').forEach(el => {
                el.addEventListener('click', function(e) {
                    // Предотвращаем двойные клики
                    if (this.classList.contains('processing')) return;
                    this.classList.add('processing');
                    setTimeout(() => this.classList.remove('processing'), 300);
                });
            });
            
            // Инициализируем состояние как загруженное
            state.isInitialized = true;
            
            // Показываем CTA
            showFloatingCTA();
            
            // Обновляем UI
            updateUI();
        }
        
        // Показать плавающий CTA
        function showFloatingCTA() {
            const floatingCTA = document.getElementById('floating-cta');
            floatingCTA.classList.remove('hidden');
        }
        
        // Инициализация шага 1
        function initStep1() {
            // Очищаем старые обработчики
            document.querySelectorAll('#step1 .step-card').forEach(card => {
                const newCard = card.cloneNode(true);
                card.parentNode.replaceChild(newCard, card);
            });
            
            // Назначаем новые обработчики
            document.querySelectorAll('#step1 .step-card').forEach(card => {
                card.addEventListener('click', function() {
                    selectStep1Card(this);
                });
            });
            
            // Восстановление выбора, если есть
            if (state.offerType) {
                const card = document.querySelector(`#step1 .step-card[data-value="${state.offerType}"]`);
                if (card) {
                    selectStep1Card(card, true);
                    // Активируем кнопку "Продолжить"
                    document.getElementById('next-btn').disabled = false;
                    document.getElementById('next-btn').classList.remove('opacity-50', 'cursor-not-allowed');
                }
            }
        }
        
        // Выбор карточки на шаге 1
        function selectStep1Card(card, silent = false) {
            // Сброс выбора
            document.querySelectorAll('#step1 .step-card').forEach(c => {
                c.classList.remove('selected');
                c.classList.remove('border-purple-500');
                const arrow = c.querySelector('.fa-arrow-right');
                if (arrow) {
                    arrow.classList.remove('text-purple-400');
                    arrow.classList.add('text-gray-400');
                }
            });
            
            // Выбор карточки
            card.classList.add('selected', 'border-purple-500');
            const arrow = card.querySelector('.fa-arrow-right');
            if (arrow) {
                arrow.classList.remove('text-gray-400');
                arrow.classList.add('text-purple-400');
            }
            
            // Сохранение выбора
            state.offerType = card.getAttribute('data-value');
            
            // Обновление счетчика
            updateOffersCount();
            
            // Активация кнопки "Продолжить"
            document.getElementById('next-btn').disabled = false;
            document.getElementById('next-btn').classList.remove('opacity-50', 'cursor-not-allowed');
            
            if (!silent) {
                saveState();
            }
        }
        
        // Переход к следующему шагу
        function goToNextStep() {
            // Проверяем, инициализировано ли приложение
            if (!state.isInitialized) {
                initApp();
                return;
            }
            
            // Валидация текущего шага
            if (!validateCurrentStep()) {
                return;
            }
            
            // Если это последний шаг, показать экран сканирования
            if (state.currentStep === 3) {
                showScanningScreen();
                startScanningProcess();
                return;
            }
            
            // Анимация скрытия текущего шага
            const currentStepEl = document.getElementById(`step${state.currentStep}`);
            currentStepEl.style.opacity = '0';
            currentStepEl.style.transform = 'translateY(-20px) scale(0.95)';
            
            setTimeout(() => {
                // Скрыть текущий шаг
                currentStepEl.classList.add('hidden');
                currentStepEl.style.opacity = '';
                currentStepEl.style.transform = '';
                
                // Увеличить номер шага
                state.currentStep++;
                
                // Показать следующий шаг
                const nextStepEl = document.getElementById(`step${state.currentStep}`);
                nextStepEl.classList.remove('hidden');
                nextStepEl.classList.add('slide-in');
                
                // Инициализировать следующий шаг
                if (state.currentStep === 2) {
                    initStep2();
                } else if (state.currentStep === 3) {
                    initStep3();
                }
                
                // Обновить UI
                updateUI();
                
                // Сохранить состояние
                saveState();
                
                // Прокрутить к верху на мобильных
                if (window.innerWidth < 768) {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            }, 300);
        }
        
        // Переход к предыдущему шагу
        function goToPrevStep() {
            // Если мы на результатах, вернуться к шагу 3
            if (!document.getElementById('results').classList.contains('hidden')) {
                goBackToEdit();
                return;
            }
            
            // Если мы на экране сканирования, вернуться к шагу 3
            if (!document.getElementById('scanning-screen').classList.contains('hidden')) {
                document.getElementById('scanning-screen').classList.add('hidden');
                document.getElementById('step3').classList.remove('hidden');
                state.currentStep = 3;
                updateUI();
                return;
            }
            
            // Анимация скрытия текущего шага
            const currentStepEl = document.getElementById(`step${state.currentStep}`);
            currentStepEl.style.opacity = '0';
            currentStepEl.style.transform = 'translateY(20px) scale(0.95)';
            
            setTimeout(() => {
                // Скрыть текущий шаг
                currentStepEl.classList.add('hidden');
                currentStepEl.style.opacity = '';
                currentStepEl.style.transform = '';
                
                // Уменьшить номер шага
                state.currentStep--;
                
                // Показать предыдущий шаг
                const prevStepEl = document.getElementById(`step${state.currentStep}`);
                prevStepEl.classList.remove('hidden');
                prevStepEl.classList.add('slide-in');
                
                // Обновить UI
                updateUI();
                
                // Прокрутить к верху на мобильных
                if (window.innerWidth < 768) {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            }, 300);
        }
        
        // Вернуться к редактированию с результатов
        function goBackToEdit() {
            // Скрыть результаты
            const resultsEl = document.getElementById('results');
            resultsEl.style.opacity = '0';
            resultsEl.style.transform = 'translateY(20px) scale(0.95)';
            
            setTimeout(() => {
                resultsEl.classList.add('hidden');
                resultsEl.style.opacity = '';
                resultsEl.style.transform = '';
                
                // Показать шаг 3
                const step3El = document.getElementById('step3');
                step3El.classList.remove('hidden');
                step3El.classList.add('slide-in');
                
                // Установить текущий шаг
                state.currentStep = 3;
                
                // Показать кнопку "Продолжить"
                document.getElementById('next-btn').classList.remove('hidden');
                
                // Обновить UI
                updateUI();
                
                // Прокрутить к верху на мобильных
                if (window.innerWidth < 768) {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            }, 300);
        }
        
        // Валидация текущего шага
        function validateCurrentStep() {
            if (state.currentStep === 1) {
                if (!state.offerType) {
                    showValidationError('Пожалуйста, выберите тип оффера');
                    return false;
                }
                return true;
            }
            
            if (state.currentStep === 2) {
                if (state.priorities.length === 0) {
                    showValidationError('Пожалуйста, выберите хотя бы один приоритет');
                    return false;
                }
                if (state.priorities.length > 2) {
                    showValidationError('Пожалуйста, выберите не более двух приоритетов');
                    return false;
                }
                return true;
            }
            
            if (state.currentStep === 3) {
                if (!state.bonusSize) {
                    showValidationError('Пожалуйста, выберите размер бонуса');
                    return false;
                }
                return true;
            }
            
            return true;
        }
        
        // Показать ошибку валидации
        function showValidationError(message) {
            // Создание элемента уведомления
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 z-50';
            notification.innerHTML = `
                <div class="bg-red-900/90 border border-red-700 text-red-200 px-6 py-4 rounded-xl shadow-lg flex items-center backdrop-blur-sm max-w-sm">
                    <i class="fas fa-exclamation-circle text-red-400 mr-3 text-base"></i>
                    <span class="font-medium text-sm">${message}</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Удаление уведомления через 3 секунды
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateY(-20px) translateX(-50%)';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        // Инициализация шага 2
        function initStep2() {
            // Очищаем старые обработчики
            document.querySelectorAll('#step2 .priority-option').forEach(option => {
                const newOption = option.cloneNode(true);
                option.parentNode.replaceChild(newOption, option);
            });
            
            // Назначаем новые обработчики
            document.querySelectorAll('#step2 .priority-option').forEach(option => {
                option.addEventListener('click', function() {
                    const value = this.getAttribute('data-value');
                    togglePriority(value, this);
                });
            });
            
            // Восстановление выбора, если есть
            if (state.priorities.length > 0) {
                state.priorities.forEach(priority => {
                    const option = document.querySelector(`#step2 .priority-option[data-value="${priority}"]`);
                    if (option) {
                        const checkbox = option.querySelector('.checkbox-custom');
                        const checkIcon = checkbox.querySelector('i');
                        
                        checkbox.classList.add('selected');
                        checkIcon.style.opacity = '1';
                        option.classList.add('border-purple-500/30');
                    }
                });
                
                document.getElementById('selected-priorities-count').textContent = state.priorities.length;
                
                // Активируем кнопку "Продолжить"
                document.getElementById('next-btn').disabled = false;
                document.getElementById('next-btn').classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }
        
        // Переключение приоритета
        function togglePriority(value, element) {
            const checkbox = element.querySelector('.checkbox-custom');
            const checkIcon = checkbox.querySelector('i');
            
            if (state.priorities.includes(value)) {
                // Удалить приоритет
                state.priorities = state.priorities.filter(p => p !== value);
                checkbox.classList.remove('selected');
                checkIcon.style.opacity = '0';
                element.classList.remove('border-purple-500/30');
            } else {
                // Добавить приоритет
                if (state.priorities.length < 2) {
                    state.priorities.push(value);
                    checkbox.classList.add('selected');
                    checkIcon.style.opacity = '1';
                    element.classList.add('border-purple-500/30');
                } else {
                    // Показать предупреждение
                    showMaxPrioritiesWarning();
                    return;
                }
            }
            
            // Обновить счетчик выбранных приоритетов
            document.getElementById('selected-priorities-count').textContent = state.priorities.length;
            
            // Обновить счетчик офферов
            updateOffersCount();
            
            // Активация кнопки "Продолжить"
            document.getElementById('next-btn').disabled = state.priorities.length === 0;
            if (state.priorities.length > 0) {
                document.getElementById('next-btn').classList.remove('opacity-50', 'cursor-not-allowed');
            } else {
                document.getElementById('next-btn').classList.add('opacity-50', 'cursor-not-allowed');
            }
            
            // Сохранить состояние
            saveState();
        }
        
        // Показать предупреждение о максимальном количестве приоритетов
        function showMaxPrioritiesWarning() {
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 z-50';
            notification.innerHTML = `
                <div class="bg-amber-900/90 border border-amber-700 text-amber-200 px-6 py-4 rounded-xl shadow-lg flex items-center backdrop-blur-sm max-w-sm">
                    <i class="fas fa-info-circle text-amber-400 mr-3 text-base"></i>
                    <span class="font-medium text-sm">Можно выбрать не более 2 приоритетов</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Удаление уведомления через 3 секунды
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateY(-20px) translateX(-50%)';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        // Инициализация шага 3
        function initStep3() {
            // Очищаем старые обработчики
            document.querySelectorAll('#step3 .bonus-size-card').forEach(card => {
                const newCard = card.cloneNode(true);
                card.parentNode.replaceChild(newCard, card);
            });
            
            // Назначаем новые обработчики
            document.querySelectorAll('#step3 .bonus-size-card').forEach(card => {
                card.addEventListener('click', function() {
                    selectBonusOption(this);
                });
            });
            
            // Восстановление выбора, если есть
            if (state.bonusSize) {
                const card = document.querySelector(`#step3 .bonus-size-card[data-value="${state.bonusSize}"]`);
                if (card) {
                    selectBonusOption(card, true);
                    // Активируем кнопку "Продолжить"
                    document.getElementById('next-btn').disabled = false;
                    document.getElementById('next-btn').classList.remove('opacity-50', 'cursor-not-allowed');
                }
            }
        }
        
        // Выбор размера бонуса
        function selectBonusOption(card, silent = false) {
            // Сброс выбора
            document.querySelectorAll('#step3 .bonus-size-card').forEach(c => {
                c.classList.remove('selected', 'border-purple-500');
                const badge = c.querySelector('.bonus-badge-rect');
                if (badge) badge.classList.remove('selected');
            });
            
            // Выбор карточки
            card.classList.add('selected', 'border-purple-500');
            const badge = card.querySelector('.bonus-badge-rect');
            if (badge) badge.classList.add('selected');
            
            // Сохранение выбора
            state.bonusSize = card.getAttribute('data-value');
            
            // Обновление счетчика
            updateOffersCount();
            
            // Активация кнопки "Продолжить"
            document.getElementById('next-btn').disabled = false;
            document.getElementById('next-btn').classList.remove('opacity-50', 'cursor-not-allowed');
            
            if (!silent) {
                saveState();
            }
        }
        
        // Показать экран сканирования
        function showScanningScreen() {
            // Скрыть шаг 3
            document.getElementById('step3').classList.add('hidden');
            
            // Показать экран сканирования
            document.getElementById('scanning-screen').classList.remove('hidden');
            
            // Скрыть кнопку "Продолжить"
            document.getElementById('next-btn').classList.add('hidden');
            document.getElementById('back-btn').classList.add('hidden');
            
            // Сброс прогресса
            document.getElementById('progress-fill').style.width = '0%';
            document.getElementById('scanned-count').textContent = '0';
            document.getElementById('filtered-count').textContent = '0';
            document.getElementById('ai-score').textContent = '0%';
            document.getElementById('scanning-complete').classList.add('hidden');
            
            // Установить первый статус
            document.getElementById('current-status').textContent = scanningSteps[0].status;
            document.getElementById('status-details').textContent = scanningSteps[0].details;
            
            // Прокрутить к верху
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // Запустить процесс сканирования
        function startScanningProcess() {
            let currentStep = 0;
            const totalSteps = scanningSteps.length;
            
            // Анимация статистики
            const totalOffers = 1247;
            const matchedOffers = 7; // Обновлено на 7 офферов
            let scanned = 0;
            let filtered = 0;
            let aiScore = 0;
            
            // Интервал для анимации чисел
            const statInterval = setInterval(() => {
                if (scanned < totalOffers) {
                    scanned += Math.floor(Math.random() * 20) + 10;
                    if (scanned > totalOffers) scanned = totalOffers;
                    document.getElementById('scanned-count').textContent = scanned.toLocaleString();
                }
                
                if (filtered < matchedOffers) {
                    filtered += Math.random() > 0.7 ? 1 : 0;
                    if (filtered > matchedOffers) filtered = matchedOffers;
                    document.getElementById('filtered-count').textContent = filtered;
                }
                
                if (aiScore < 100) {
                    aiScore += Math.floor(Math.random() * 3) + 1;
                    if (aiScore > 100) aiScore = 100;
                    document.getElementById('ai-score').textContent = aiScore + '%';
                }
            }, 100);
            
            // Функция для перехода к следующему шагу
            function nextStep() {
                if (currentStep < totalSteps) {
                    const step = scanningSteps[currentStep];
                    
                    // Обновить статус
                    document.getElementById('current-status').textContent = step.status;
                    document.getElementById('status-details').textContent = step.details;
                    
                    // Обновить прогресс бар
                    setTimeout(() => {
                        document.getElementById('progress-fill').style.width = step.progress + '%';
                    }, 100);
                    
                    // Увеличить счетчик шагов
                    currentStep++;
                    
                    // Если это не последний шаг, запустить следующий через 2 секунды
                    if (currentStep < totalSteps) {
                        setTimeout(nextStep, 2000);
                    } else {
                        // Последний шаг - показать завершение
                        setTimeout(() => {
                            // Остановить анимацию статистики
                            clearInterval(statInterval);
                            
                            // Установить финальные значения
                            document.getElementById('scanned-count').textContent = totalOffers.toLocaleString();
                            document.getElementById('filtered-count').textContent = matchedOffers;
                            document.getElementById('ai-score').textContent = '98%';
                            
                            // Показать завершение
                            document.getElementById('scanning-complete').classList.remove('hidden');
                            
                            // Через 1.5 секунды показать результаты
                            setTimeout(showResultsAfterScanning, 1500);
                        }, 2000);
                    }
                }
            }
            
            // Начать процесс
            setTimeout(nextStep, 1000);
        }
        
        // Показать результаты после сканирования
        function showResultsAfterScanning() {
            // Скрыть экран сканирования
            document.getElementById('scanning-screen').classList.add('hidden');
            
            // Генерировать и показать результаты
            generateResults();
            showResults();
            
            // Показать кнопку "Назад"
            document.getElementById('back-btn').classList.remove('hidden');
        }
        
        // Обновление UI
        function updateUI() {
            // Обновление прогресс-бара
            updateProgressBar();
            
            // Обновление текста кнопки
            updateNextButton();
            
            // Показать/скрыть кнопку "Назад"
            updateBackButton();
        }
        
        // Обновление прогресс-бара
        function updateProgressBar() {
            // Сброс всех точек
            document.querySelectorAll('.progress-dot').forEach(dot => {
                dot.classList.remove('active');
            });
            
            // Сброс всех линий
            document.querySelectorAll('.progress-line').forEach(line => {
                line.classList.remove('active');
            });
            
            // Активация точек в зависимости от текущего шага
            for (let i = 1; i <= state.currentStep; i++) {
                const dot = document.getElementById(`step${i}-dot`);
                if (dot) dot.classList.add('active');
            }
            
            // Активация линий прогресса
            for (let i = 1; i < state.currentStep; i++) {
                const line = document.getElementById(`line${i}-${i+1}`);
                if (line) line.classList.add('active');
            }
        }
        
        // Обновление кнопки "Далее"
        function updateNextButton() {
            const nextBtn = document.getElementById('next-btn');
            const nextBtnText = document.getElementById('next-btn-text');
            
            if (state.currentStep === 3) {
                nextBtnText.textContent = 'AI Подбор';
                nextBtn.classList.add('ai-pulse');
            } else {
                nextBtnText.textContent = 'Продолжить';
                nextBtn.classList.remove('ai-pulse');
            }
            
            // Проверяем доступность кнопки
            let isEnabled = false;
            if (state.currentStep === 1) {
                isEnabled = !!state.offerType;
            } else if (state.currentStep === 2) {
                isEnabled = state.priorities.length > 0;
            } else if (state.currentStep === 3) {
                isEnabled = !!state.bonusSize;
            }
            
            nextBtn.disabled = !isEnabled;
            if (isEnabled) {
                nextBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            } else {
                nextBtn.classList.add('opacity-50', 'cursor-not-allowed');
            }
        }
        
        // Обновление кнопки "Назад"
        function updateBackButton() {
            const backBtn = document.getElementById('back-btn');
            
            if (state.currentStep > 1 || !document.getElementById('results').classList.contains('hidden')) {
                backBtn.classList.remove('hidden');
            } else {
                backBtn.classList.add('hidden');
            }
        }
        
        // Обновление счетчика офферов
        function updateOffersCount() {
            let baseCount = 12;
            
            // Уменьшение в зависимости от выбора
            if (state.offerType) baseCount -= 2;
            if (state.priorities.length > 0) baseCount -= state.priorities.length * 1.5;
            if (state.bonusSize) {
                if (state.bonusSize === 'under100') baseCount -= 1;
                else if (state.bonusSize === '100-200') baseCount -= 3;
                else if (state.bonusSize === 'over200') baseCount -= 5;
            }
            
            // Минимум 7 офферов (теперь у нас 7 реальных офферов)
            const count = Math.max(7, Math.round(baseCount));
            
            // Обновление счетчиков
            const mobileCount = document.getElementById('offers-count-mobile');
            if (mobileCount) {
                mobileCount.textContent = `${count} офферов`;
            }
        }
        
        // Генерация результатов с РЕАЛЬНЫМИ данными
        function generateResults() {
            // Очистка контейнера
            const container = document.getElementById('offers-container');
            container.innerHTML = '';
            
            // Обновление текста выбранных фильтров
            updateSelectedFiltersText();
            
            // Генерация карточек реальных офферов
            offersData.forEach((offer, index) => {
                const card = document.createElement('div');
                card.className = 'glass-card glass-card-hover rounded-xl overflow-hidden fade-in';
                card.style.animationDelay = `${index * 0.1}s`;
                
                card.innerHTML = `
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-6">
                            <div>
                                <div class="flex items-center mb-3">
                                    <div class="w-12 h-12 rounded-xl bg-gradient-to-r ${offer.color} flex items-center justify-center mr-4 relative overflow-hidden">
                                        <i class="fas fa-${offer.icon} text-white text-xl"></i>
                                        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent ai-shimmer"></div>
                                    </div>
                                    <div>
                                        <h3 class="font-bold text-lg text-white mb-1">${offer.name}</h3>
                                        <div class="flex items-center">
                                            <div class="flex text-amber-400 text-xs">
                                                ${getRatingStars(offer.rating)}
                                            </div>
                                            <span class="text-gray-400 text-xs ml-2">${offer.rating}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-6">
                            <div class="text-gray-400 text-sm mb-2">БОНУС:</div>
                            <div class="text-xl font-bold text-white">${offer.bonus}</div>
                        </div>
                        
                        <div class="grid grid-cols-3 gap-3 mb-6">
                            <div class="bg-white/5 rounded-lg p-3 text-center">
                                <div class="text-gray-400 text-xs mb-1">Мин. депозит</div>
                                <div class="font-bold text-white text-base">${offer.minDeposit}</div>
                            </div>
                            <div class="bg-white/5 rounded-lg p-3 text-center">
                                <div class="text-gray-400 text-xs mb-1">Вывод</div>
                                <div class="font-bold text-white text-base">${offer.withdrawalTime}</div>
                            </div>
                            <div class="bg-white/5 rounded-lg p-3 text-center">
                                <div class="text-gray-400 text-xs mb-1">Верификация</div>
                                <div class="font-bold text-green-400 text-base">${offer.verification}</div>
                            </div>
                        </div>
                        
                        <div class="flex flex-wrap gap-2 mb-6">
                            <span class="px-3 py-1 bg-gradient-to-r ${offer.color} rounded text-xs font-semibold text-white">
                                ${offer.tag}
                            </span>
                            <span class="px-3 py-1 bg-cyan-900/30 text-cyan-400 rounded text-xs font-semibold">
                                <i class="fas fa-robot mr-1"></i>${offer.popularity}
                            </span>
                            <span class="px-3 py-1 bg-emerald-900/30 text-emerald-400 rounded text-xs font-semibold">
                                AI Score: ${offer.aiScore}/10
                            </span>
                        </div>
                        
                        <button class="w-full py-4 rounded-xl bg-gradient-to-r ${offer.color} text-white font-semibold text-base clickable offer-cta relative overflow-hidden" data-offer-id="${offer.id}">
                            <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent ai-shimmer"></div>
                            <i class="fas fa-bolt mr-2"></i>Забрать AI-оффер
                        </button>
                    </div>
                `;
                
                container.appendChild(card);
            });
            
            // Добавление обработчиков для кнопок "Забрать AI-оффер"
            document.querySelectorAll('.offer-cta').forEach(btn => {
                btn.addEventListener('click', function() {
                    const offerId = this.getAttribute('data-offer-id');
                    handleOfferClick(offerId);
                });
            });
        }
        
        // Получить звезды рейтинга
        function getRatingStars(rating) {
            let stars = '';
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            
            for (let i = 0; i < fullStars; i++) {
                stars += '<i class="fas fa-star text-xs"></i>';
            }
            
            if (hasHalfStar) {
                stars += '<i class="fas fa-star-half-alt text-xs"></i>';
            }
            
            const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
            for (let i = 0; i < emptyStars; i++) {
                stars += '<i class="far fa-star text-xs"></i>';
            }
            
            return stars;
        }
        
        // Обновление текста выбранных фильтров
        function updateSelectedFiltersText() {
            // Тип оффера
            const offerTypeText = {
                'deposit': 'Депозитный',
                'freespins': 'Фриспины',
                'fastwithdrawal': 'Быстрый вывод'
            };
            
            if (state.offerType) {
                document.getElementById('selected-type-text').textContent = offerTypeText[state.offerType];
            }
            
            // Приоритеты
            const prioritiesText = {
                'speed': 'Скорость',
                'maxbonus': 'Максимум',
                'mindocs': 'Минимум док.',
                'verified': 'Проверенные'
            };
            
            const selectedPriorities = state.priorities.map(p => prioritiesText[p]).join(', ');
            document.getElementById('selected-priorities-text').textContent = 
                state.priorities.length > 0 ? selectedPriorities : 'Не выбрано';
            
            // Размер бонуса
            const bonusText = {
                'under100': 'До 100%',
                '100-200': '100-200%',
                'over200': '200%+'
            };
            
            if (state.bonusSize) {
                document.getElementById('selected-bonus-text').textContent = bonusText[state.bonusSize];
            }
        }
        
        // Показать результаты
        function showResults() {
            // Скрыть текущий шаг
            document.getElementById(`step${state.currentStep}`).classList.add('hidden');
            
            // Показать результаты
            const resultsEl = document.getElementById('results');
            resultsEl.classList.remove('hidden');
            resultsEl.classList.add('fade-in');
            
            // Скрыть кнопку "Продолжить" на странице результатов
            document.getElementById('next-btn').classList.add('hidden');
            
            // Обновление счетчика на 7 офферов
            document.getElementById('matched-offers-count').textContent = '7 офферов';
            
            // Показать кнопку "Назад"
            document.getElementById('back-btn').classList.remove('hidden');
            
            // Прокрутить к верху на мобильных
            if (window.innerWidth < 768) {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }
        
        // Обработка клика по офферу - ПЕРЕХОД ПО ПАРТНЕРСКОЙ ССЫЛКЕ
        function handleOfferClick(offerId) {
            const offer = offersData.find(o => o.id == offerId);
            
            // На мобильных и десктопе - прямой переход по партнерской ссылке
            window.open(offer.partnerLink, '_blank');
        }
        
        // Поделиться результатами
        function shareResults() {
            const shareUrl = window.location.href;
            
            // Копирование в буфер обмена
            navigator.clipboard.writeText(shareUrl).then(() => {
                const shareBtn = document.getElementById('share-results');
                const originalHtml = shareBtn.innerHTML;
                
                shareBtn.innerHTML = '<i class="fas fa-check mr-2"></i><span class="text-base">AI-ссылка скопирована!</span>';
                shareBtn.disabled = true;
                
                setTimeout(() => {
                    shareBtn.innerHTML = originalHtml;
                    shareBtn.disabled = false;
                }, 2000);
            });
        }
        
        // Сохранение состояния в localStorage
        function saveState() {
            const stateToSave = {
                ...state,
                timestamp: new Date().getTime()
            };
            
            localStorage.setItem('aiOfferWizardState', JSON.stringify(stateToSave));
        }
        
        // Загрузка сохраненного состояния
        function loadSavedState() {
            const savedState = localStorage.getItem('aiOfferWizardState');
            
            if (savedState) {
                try {
                    const parsedState = JSON.parse(savedState);
                    const now = new Date().getTime();
                    const weekInMs = 7 * 24 * 60 * 60 * 1000;
                    
                    // Проверка, не устарели ли данные (больше 7 дней)
                    if (now - parsedState.timestamp < weekInMs) {
                        // Восстановление состояния
                        state.offerType = parsedState.offerType;
                        state.priorities = parsedState.priorities || [];
                        state.bonusSize = parsedState.bonusSize;
                        
                        // Обновление счетчика
                        updateOffersCount();
                    }
                } catch (e) {
                    console.error('Ошибка при загрузке состояния:', e);
                }
            }
        }
    </script>
</body>
</html>
